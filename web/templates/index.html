<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{{ brand_name }} — SVG Board</title>

  <style>
    :root{
      --bg:#0e0e10; --fg:#eaeaea; --muted:#a4a4a4;
      --board-dark:#769656; --board-light:#eeeed2;
      --accent:#57b3ff; --card:#15161a; --shadow: rgba(0,0,0,.35);
      --footer-bg:#0e0e10; --footer-border:#2a2a2a;
    }
    html,body{background:var(--bg);color:var(--fg);margin:0;font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Apple Color Emoji","Segoe UI Emoji";}
    /* مساحة للـ footer الثابت */
    body { padding-bottom: 44px; }

    /* ===== تحسينات الموبايل والدقّة ===== */
    html, body { overscroll-behavior: none; -webkit-tap-highlight-color: transparent; }
    .wrap, .board-wrap, #board { user-select: none; -webkit-user-select:none; -ms-user-select:none; }
    .board-wrap, #board, .piece { touch-action: none; -ms-touch-action: none; }
    svg image.piece { -webkit-user-drag: none; user-drag: none; }

    .wrap{ max-width:1080px; margin:24px auto; padding:0 16px; }
    h1{ margin:0 0 12px; font-weight:700; letter-spacing:.2px; display:flex; align-items:center; gap:10px;}
    .brand-logo{ height:26px; vertical-align:middle; }

    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:12px; }
    button{ background:#1f2126; color:#fff; border:1px solid #2b2e35; padding:10px 14px; border-radius:10px; cursor:pointer; transition:.15s; font-weight:600;}
    button:hover{ transform:translateY(-1px); box-shadow:0 6px 18px -10px var(--shadow); }
    button.secondary{ background:#17181c; color:#ddd; }
    .input{ background:#111319; border:1px solid #2b2e35; color:#ddd; padding:10px 12px; border-radius:10px; outline:none; }
    .muted{ color:var(--muted); }

    .board-wrap{ width:min(90vw, 720px); aspect-ratio:1/1; border-radius:18px; overflow:hidden; background:#0c0d0f;
      box-shadow: 0 20px 50px -30px rgba(0,0,0,.6), inset 0 0 0 1px rgba(255,255,255,.04);}
    #board{ width:100%; height:100%; display:block; shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:crisp-edges; transform-origin:50% 50%;}
    .square.light { fill: var(--board-light) !important; }
    .square.dark  { fill: var(--board-dark)  !important; }
    .piece{ opacity:1 !important; filter: drop-shadow(0 .02em .05em var(--shadow)); vector-effect: non-scaling-stroke; paint-order: stroke fill; }

    .panels{ display:flex; gap:20px; flex-wrap:wrap; }
    .explain-card{ background:var(--card); border:1px solid #20222a; border-radius:14px; padding:14px; margin-top:14px; max-width:min(90vw,720px);
      box-shadow: 0 12px 30px -24px rgba(0,0,0,.8), inset 0 0 0 1px rgba(255,255,255,.03); font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace; }
    .explain-card h2{ margin:0 0 10px; font-size:1.05rem;}
    .explain-list{ list-style:disc; padding-left:1.2em; margin:.25em 0 .75em; }
    .tag{ color:#c0e3ff; }
    .key{ color:#98ffa6; }

    .modal.hidden{ display:none; }
    .modal{ position:fixed; inset:0; background:rgba(0,0,0,.5); display:flex; align-items:center; justify-content:center; }
    .modal-card{ background:#15161a; border:1px solid #20222a; border-radius:12px; padding:16px; width:280px; }
    .modal-card .title{ font-weight:700; margin-bottom:10px; }
    .choices{ display:grid; grid-template-columns: 1fr 1fr; gap:8px; }

    /* ===== Footer ===== */
    .site-footer {
      position: fixed; bottom: 0; left: 0; width: 100%;
      padding: 8px 0; font-size: 14px; color: var(--muted);
      background: var(--footer-bg); border-top: 1px solid var(--footer-border); z-index: 999;
    }
    .footer-inner { max-width: 1080px; margin: 0 auto; padding: 0 16px; display: flex; justify-content: space-between; align-items: center; }
    .footer-right { display: flex; align-items: center; gap: 8px; }
    .heart { width: 20px; height: 20px; display: inline-block; transform-origin: center; animation: heartbeat 1s infinite; }
    @keyframes heartbeat{
      0%{ transform: scale(1);} 14%{ transform: scale(1.3);} 28%{ transform: scale(1);}
      42%{ transform: scale(1.3);} 70%{ transform: scale(1);} 100%{ transform: scale(1);}
    }
    @media (prefers-reduced-motion: reduce){ .heart{ animation: none; } }
  </style>

  <link rel="icon" href="{{ url_for('static', filename='branding/logo.svg') }}">
</head>
<body>
  <div class="wrap">
    <h1>
      <img class="brand-logo" src="{{ url_for('static', filename='branding/logo.svg') }}" alt="logo">
      {{ brand_name }} — SVG Board
    </h1>

    <div class="panels">
      <div id="boardWrap" class="board-wrap orient-white">
        <svg id="board" viewBox="0 0 8 8" preserveAspectRatio="xMidYMid meet"></svg>
      </div>

      <div class="explain-card" id="explain">
        <h2>AI Explain</h2>
        <div><b>Net Value:</b> <span id="net-value" class="key">—</span></div>
        <div><b>SF Eval (cp):</b> <span id="sf-eval" class="tag">—</span></div>
        <div style="margin-top:.5em;"><b>MCTS Visits (Top):</b>
          <ul id="mcts-top" class="explain-list"></ul>
        </div>
        <div><b>Policy Top-5:</b>
          <ul id="policy-top" class="explain-list"></ul>
        </div>
        <div style="margin-top:.75em;">
          <button id="finish" class="secondary">Finish & Email Report</button>
          <span id="status" class="muted"></span>
        </div>
      </div>
    </div>

    <div class="row">
      <button id="solo-white">Play vs AI (White)</button>
      <button id="solo-black">Play vs AI (Black)</button>
      <button id="pvp-create" class="secondary" disabled>Create PvP</button>
      <input id="pvp-id" type="text" placeholder="Game ID" class="input" disabled/>
      <button id="pvp-join" class="secondary" disabled>Join PvP</button>
    </div>
  </div>

  <!-- Promotion Modal -->
  <div id="promoModal" class="modal hidden">
    <div class="modal-card">
      <div class="title">Choose promotion</div>
      <div class="choices">
        <button data-p="q">♕ Queen</button>
        <button data-p="r">♖ Rook</button>
        <button data-p="b">♗ Bishop</button>
        <button data-p="n">♘ Knight</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-inner">
      <div class="footer-left">developed and designed by Dr. Eng. Ahmed Fathy</div>
      <div class="footer-right">
        <span>Made with Egyptian pure</span>
        <svg class="heart" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="red" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
                2 6 4 4 6.5 4c1.74 0 3.41 1.01
                4.13 2.44h1.74C14.09 5.01 15.76 4 17.5 4
                20 4 22 6 22 8.5c0 3.78-3.4 6.86-8.55
                11.54L12 21.35z"/>
        </svg>
      </div>
    </div>
  </footer>

  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" crossorigin="anonymous"></script>
  <!-- لو الملف داخل web/static/client.js اتركه كما هو؛ لو داخل web/static/js/client.js غيّر المسار -->
  <script src="{{ url_for('static', filename='client.js') }}"></script>
</body>
</html>
